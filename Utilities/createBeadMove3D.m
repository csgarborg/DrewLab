beadFiles = {'Y:\20-01-15_MouseExp\Bead\z0120.tif',...
'Y:\20-01-15_MouseExp\Bead\z0116.tif',...
'Y:\20-01-15_MouseExp\Bead\z0114.tif',...
'Y:\20-01-15_MouseExp\Bead\z0112.tif',...
'Y:\20-01-15_MouseExp\Bead\z0110.tif',...
'Y:\20-01-15_MouseExp\Bead\z0108.tif',...
'Y:\20-01-15_MouseExp\Bead\z0106.tif',...
'Y:\20-01-15_MouseExp\Bead\z0104.tif',...
'Y:\20-01-15_MouseExp\Bead\z0102.tif',...
'Y:\20-01-15_MouseExp\Bead\z0100.tif',...
'Y:\20-01-15_MouseExp\Bead\z0102.tif',...
'Y:\20-01-15_MouseExp\Bead\z0104.tif',...
'Y:\20-01-15_MouseExp\Bead\z0106.tif',...
'Y:\20-01-15_MouseExp\Bead\z0108.tif',...
'Y:\20-01-15_MouseExp\Bead\z0110.tif',...
'Y:\20-01-15_MouseExp\Bead\z0112.tif',...
'Y:\20-01-15_MouseExp\Bead\z0114.tif',...
'Y:\20-01-15_MouseExp\Bead\z0116.tif',...
'Y:\20-01-15_MouseExp\Bead\z0120.tif'};


for n = 1:numel(beadFiles)
     beadLayer = im2double(uint8([zeros(128,512);zeros(256,128),imread(beadFiles{n}),zeros(256,128);zeros(128,512)]/10));
     bead3D(:,:,n) = beadLayer;
end
imshow(bead3D(:,:,10))
numMoves = [6 5 4 4 3 1 7 5 3 8 9 2 4 5 7 3];
translateVecs = [0 0 0;0 1 0;2 0 -1;-2 0 1;0 -2 0;-1 -1 0;2 1 0;1 0 1;2 -1 -1;0 -2 0;-1 0 0;0 0 0;-1 0 0;3 0 -1;-1 1 0;1 -1 1];

if exist('Y:\20-01-15_MouseExp\Bead\beadMove3D.tif','file')
    delete('Y:\20-01-15_MouseExp\Bead\beadMove3D.tif')
end
imwrite(bead3D(:,:,n),'Y:\20-01-15_MouseExp\Bead\beadMove3D.tif');
for n = 1:size(bead3D,3)
    imwrite(bead3D(:,:,n),'Y:\20-01-15_MouseExp\Bead\beadMove3D.tif','WriteMode','append');
end

for n = 1:length(numMoves)
    for i = 1:numMoves(n)
        bead3D = imtranslate(bead3D, translateVecs(n,:), 'linear');
        for j = 1:size(bead3D,3)
            imwrite(bead3D(:,:,j),'Y:\20-01-15_MouseExp\Bead\beadMove3D.tif','WriteMode','append');
        end
    end
end